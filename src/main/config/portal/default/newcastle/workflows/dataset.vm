#set($oid = $self.getFormData("oid"))
#set($title = $self.getFormData("title"))
#set($pageTitle = $title)
<style type="text/css">
.inputscreens input {
    margin: 0.5ex;
}

.inputscreens textarea {
    margin: 0.5ex;
}

.inputscreens table {
    margin: 0.5ex;
    margin-bottom: 2ex;
}

td.delete-row {
    cursor: pointer;
    color: blue;
}

.prev-tab,.next-tab, .form-fields-save {
    cursor: pointer;
    color: blue;
    margin: 1ex;
}

.saved-result {
    font-size: 120%;
    vertical-align: middle;
}

div.tab-nav {
    padding-top: 2ex;
}

img.thumbnail {
    height: 100px;
    border: 1px solid black;
    margin: 10px 5px 0 0;
}

div.accordion-header {
    padding-left: 4ex;
    margin: 0px;
}

h2.accordion-header {
    padding-left: 4ex;
    margin: 0px;
    background: gray;
}

div.accordion {
    margin-left: -1em;
    margin-bottom: 2em;
}

div.tab-nav {
    border-top: thin solid #CCC;
    padding-top: 2ex;
}

.box h2 {
    background: none;
    color: black;
    text-transform: none;
}
</style>
<div class="grid_16">
    <p><a href="$portalPath/detail/$oid/">View public record</a></p>
    <div class="box">
        <div id="inputForms"><!-- --></div>
    </div>
</div>
<script type="text/javascript" src="$portalPath/js/jquery.cookie.js"></script>
<script type="text/javascript" src="$portalPath/javascript-widgets/widgets.js"></script>
<script type="text/javascript" src="$portalPath/javascript-widgets/nameLookup.js"></script>
<script type="text/javascript">
var packageData = {
    ajaxRequestUrl: "$self.getAjaxRequestUrl()",
    metaData: $self.getJsonMetadata(),
    oid: "$oid",
    packagedItems: $self.getJsonPackagedItems(),
    portalPath: "$portalPath"
};
$(function() {
    function onContentLoaded() {
        widgets.contentLoaded();
        try {
            widgets.formsById["main-form"].restore(packageData.metaData);
        } catch(e) {
            alert(e);
        }
        $(".accordion").accordion({
            header: ".accordion-header",
            collapsible: true,
            clearStyle: true,
            active: false
        });
        widgets.changeToTabLayout($(".inputscreens")).tabs({ cookie: {} });
        nameLookup.init();
    }
    $("#inputForms").load("$portalPath/workflows/forms/dataset", onContentLoaded);
});
</script>
