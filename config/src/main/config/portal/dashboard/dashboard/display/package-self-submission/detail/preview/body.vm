#macro(sectionHeading $heading)
<span class="accordion-header">$heading</span>
#end
#macro(noInformation)
<i>Not provided</i>
#end
#macro(display $key $name)
    <dt>$name</dt>
    #set($v = $metadata.get("$key"))
    <dd>
    #if ($v)
		$v
    #else
		#noInformation()
    </dd>
    #end
#end

<script>
function manage_access(e) {
	$("#dialog-form").dialog("open");
}
</script>
<div>
    #set($oid = $metadata.get("id"))
    #parseDisplayTemplate("detail/preview/sections/overview.vm")
</div>

<div id="toggle-accordion" class="toggle-accordion">
    <span id="toggle-accordion-icon" class="ui-icon ui-icon-triangle-1-e"></span>
    <span id="toggle-accordion-text">Show all sections</span>
</div>
<div class="accordion">
    #parseDisplayTemplate("detail/preview/sections/people.vm")
	#parseDisplayTemplate("detail/preview/sections/access.vm")
	#parseDisplayTemplate("detail/preview/sections/coverage.vm")
	#parseDisplayTemplate("detail/preview/sections/submission.vm")

</div>

<script type="text/javascript">
$(function(){
    function addAccordion() {
        $(".accordion").accordion({
            autoHeight:false,
            clearStyle:true,
            collapsible:false,
            header:".accordion-header"
        });
    }
    $("#toggle-accordion").click(function(){
        if ($(".ui-accordion").length > 0) {
            $(".accordion").fadeOut(function(){
                $(this).accordion("destroy");
                $(".accordion-header").each(function() {
                    $(this).addClass("accordion-reset");
                });
                $(this).fadeIn();
            });
            $("#toggle-accordion-text").text("Show sections individually");
        } else {
            $(".accordion").fadeOut(function(){
                addAccordion();
                $(".accordion-header").each(function() {
                    $(this).removeClass("accordion-reset");
                });
                $(this).fadeIn();
            });
            $("#toggle-accordion-text").text("Show all sections");
        }
        $("#toggle-accordion-icon").toggleClass("ui-icon-triangle-1-e ui-icon-triangle-1-s");
        return false;
    });
    addAccordion();
});
</script>

<div class="clear"></div>
